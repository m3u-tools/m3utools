<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IPTV Player</title>
    <style>
        /* Your existing CSS */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #121212;
            color: white;
        }

#fileInput, #searchBar, button {
    padding: 10px 15px;
    font-size: 1em;
    margin: 5px;
    border-radius: 4px;
    width: 200px; /* Ensure all elements have the same width */
    border: 2px solid #007bff;
    background-color: #007bff;
    color: white;
    text-align: center;
    cursor: pointer;
    transition: background 0.2s ease;
}

/* Remove the border of search bar to match the file input and buttons */
#searchBar {
    border: 2px solid #007bff;
    background-color: #fff;
    color: black;
}

/* Ensure the search bar and button have consistent width */
button {
    background-color: #007bff;
}

button:hover {
    background-color: #0056b3;
}

        header {
            background-color: #121212;
            padding: 10px;
            color: #1a73e8; 
            text-align: center;
        }

        video {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 80%;
            border-radius: 20px;
            padding: 10px 0;
        }
        #controls {
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #121212;
            padding: 10px 0;
            border-bottom: 2px solid #121212;
        }


        #channelList {
            list-style-type: none;
            padding: 0;
            margin: 0;
            max-height: 400px;
            overflow-y: auto;
            background-color: #121212;
            border-top: 1px solid #121212;
        }

        #channelList li {
            padding: 8px;
            cursor: pointer;
        }

        #channelList li:hover {
            background-color: #1a73e8;
        }
    /* Group headers */
    .group-header {
      background-color: #1a73e8;
      color: white;
      padding: 8px 10px;
      text-align: center;
      font-weight: bold;
      border-radius: 4px;
      margin: 5px 0;
    }
        #searchBar {
            margin-left: 10px;
            padding: 10px;
            border: 2px solid #007bff;
            border-radius: 4px;
            background-color: white;
            color: #000;
            width: 200px;
        }

        #fileInput {
            padding: 10px 15px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            color: white;
            background-color: #007bff;
            cursor: pointer;
            width: 370px;
            transition: background 0.2s ease;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            color: white;
            background-color: #007bff;
            cursor: pointer;
            width: 400px;
            transition: background 0.2s ease;
        }

        button:hover {
            background-color: #0056b3;
        }
#controls {
    display: flex;
    flex-direction: column; /* Stack elements vertically */
    justify-content: center;
    align-items: center;
    background-color: #121212;
    padding: 10px 0;
    border-bottom: 2px solid #121212;
}

#searchBar {
    margin-bottom: 10px; /* Adds space between search bar and button */
    padding: 10px 15px;
    border: 2px solid #007bff;
    border-radius: 4px;
    background-color: white;
    color: #000;
    width: 365px;
}


        /* Navigation Bar */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #000;
            padding: 10px 20px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            transition: transform 0.3s ease-in-out;
        }

        .navbar .logo {
            font-size: .75em;
            color: #fff;
            text-decoration: none;
            font-weight: bold;
            transition: color 0.3s ease;
        }

        .navbar .logo:hover {
            color: #1a73e8;
        }

        .navbar .menu a {
            font-size: 1em;
            text-decoration: none;
            color: #ffffff;
            padding: 10px 15px;
            transition: background-color 0.3s ease, transform 0.2s ease;
            border-radius: 4px;
        }

        .navbar .menu a:hover {
            background-color: #333;
            color: #1a73e8;
            transform: translateY(-2px);
        }

        /* Dropdown Menu */
        .navbar .menu .dropdown {
            position: relative;
            display: inline-block;
        }

        .navbar .menu .dropdown-content {
            display: none;
            position: absolute;
            background-color: #333;
            min-width: 160px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            z-index: 1;
            border-radius: 4px;
        }

        .navbar .menu .dropdown:hover .dropdown-content {
            display: block;
        }

        .navbar .menu .dropdown-content a {
            color: white;
            padding: 10px 15px;
            text-decoration: none;
            display: block;
        }

        .navbar .menu .dropdown-content a:hover {
            background-color: #1976D2;
        }

        .hamburger {
            display: none;
            font-size: 1.8em;
            color: white;
            cursor: pointer;
        }

        /* Hamburger Menu (Mobile) */
        .navbar .menu-mobile {
            display: none;
            flex-direction: column;
            background-color: #000;
            position: absolute;
            top: 60px;
            left: 0;
            right: 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
            padding: 20px 10px;
            transition: all 0.3s ease-in-out;
        }

        .navbar .menu-mobile.open {
            display: flex;
        }

        .navbar .menu-mobile a {
            text-decoration: none;
            background-color: #000;
            color: white;
            padding: 15px 20px;
            margin: 5px 0;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2em;
            transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        .navbar .menu-mobile a:hover {
            background-color: #1976D2;
            transform: translateY(-2px);
            box-shadow: 0 8px 12px rgba(0, 0, 0, 0.5);
        }

        .menu-mobile.open {
            display: flex;
            animation: slideDown 0.3s ease-in-out;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @media (max-width: 768px) {
            .menu {
                display: none;
            }

            .hamburger {
                display: block;
            }
        }
h4 {
            color: #121212;
        }        
    </style>
<script defer data-domain="mytester1.tiiny.site" src="https://analytics.tiiny.site/js/plausible.js"></script><script type="text/javascript" src="https://tiiny.host/ad-script.js"></script></head>
<body>
    <header>
    <!-- Navbar -->
    <div class="navbar" id="navbar">
        <a href="https://m3u-tools.tiiny.site/" class="logo">M3U TOOLS</a>
        <div class="menu">
            <!-- M3U Info Checker Dropdown -->
            <div class="dropdown">
                <a href="javascript:void(0)">Info Checker</a>
                <div class="dropdown-content">
                    <a href="https://m3u-tools.tiiny.site/m3uinfo.html">M3U Info</a>
                    <a href="https://m3u-tools.tiiny.site/xcinfo.html">XCUI Info</a>
                </div>
            </div>

            <!-- M3U Editor Dropdown -->
            <div class="dropdown">
                <a href="javascript:void(0)">M3U Editor</a>
                <div class="dropdown-content">
                    <a href="https://m3u-tools.tiiny.site/m3u.html">M3U Editor</a>
                </div>
            </div>

            <!-- XML Editor Dropdown -->
            <div class="dropdown">
                <a href="javascript:void(0)">EPG Editor</a>
                <div class="dropdown-content">
                    <a href="https://m3u-tools.tiiny.site/xml.html">XML Editor</a>
                    <a href="https://m3u-tools.tiiny.site/gz.html">GZ Editor 1</a>
                </div>
            </div>

            <!-- Web Player Dropdown -->
            <div class="dropdown">
                <a href="javascript:void(0)">Web Player</a>
                <div class="dropdown-content">
                    <a href="https://m3u-tools.tiiny.site/aplayer.html">Player</a>

                </div>
            </div>

            <!-- GitHub Dropdown -->
            <div class="dropdown">
                <a href="javascript:void(0)">GitHub</a>
                <div class="dropdown-content">
                    <a href="https://github.com/m3u-tools/m3utools">Repo</a>
                    <a href="https://github.com/m3u-tools/m3utools/issues">Issues</a>
                </div>
            </div>

            <!-- Chat Dropdown -->
            <div class="dropdown">
                <a href="javascript:void(0)">Chat</a>
                <div class="dropdown-content">
                    <a href="https://m3u-tools.chatango.com/">Chat</a>
                </div>
            </div>
        </div>

        <div class="hamburger" id="hamburger">&#9776;</div>
        <div class="menu-mobile" id="menuMobile">
            <a href="https://m3u-tools.tiiny.site/m3uinfo.html">M3U Info Checker</a>
            <a href="https://m3u-tools.tiiny.site/xcinfo.html">XCUI Info Checker</a>
            <a href="https://m3u-tools.tiiny.site/m3u.html">M3U Editor</a>
            <a href="https://m3u-tools.tiiny.site/xml.html">XML Editor</a>
            <a href="https://m3u-tools.tiiny.site/gz.html">XML.gz Editor</a>
            <a href="https://m3u-tools.tiiny.site/aplayer.html">Web Player</a>
            <a href="https://github.com/m3u-tools/m3utools">GitHub</a>
            <a href="https://m3u-tools.chatango.com/">Chat</a>
        </div>
    </div>
<h4>test</h4>
        <h1>Advanced IPTV Player</h1>
    </header>

        </div>
    </div>

<div id="controls">
    <center>
        <input type="file" id="fileInput" onchange="loadPlaylist()" accept="">
        <input type="text" id="searchBar" onkeyup="filterChannels()" placeholder="Search Channels">
    </center>
</div>
       <div>
     <center><button onclick="togglePlaylist()">Show/Hide Channel List</button>
    </center>
</div>
    <div>
        <video id="videoPlayer" controls></video>
    </div>

    <ul id="channelList"></ul>
<h4>test</h4>
<h4>test</h4>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script>
        const videoPlayer = document.getElementById('videoPlayer');
        const channelList = document.getElementById('channelList');
        const fileInput = document.getElementById('fileInput');
        let allChannels = [];
        let isPlaylistVisible = true;

				function parseM3U(content) {
						const lines = content.split('\n');
						const channels = [];
						let currentGroup = '';

						for (let line of lines) {
								line = line.trim();

								line = line.replace(/tvg-id="[^"]*"/g, '');

								const groupMatch = line.match(/group-title="([^"]+)"/);
								if (groupMatch) {
										currentGroup = groupMatch[1];
								}

								if (line.startsWith('#EXTINF:')) {
										const nameMatch = line.match(/,(.*?)$/);
										channels.push({
												name: nameMatch ? nameMatch[1].trim() : 'Unknown Channel',
												group: currentGroup,
										});
								} else if (line.startsWith('http')) {
										const url = line.trim();
										if (channels.length) {
												channels[channels.length - 1].url = url;
										}
								}
						}

						return channels;
				}


        function renderPlaylist(channels) {
            channelList.innerHTML = '';
            let lastGroup = '';

            channels.forEach(channel => {
                if (channel.group && channel.group !== lastGroup) {
                    lastGroup = channel.group;
                    const groupHeader = document.createElement('li');
                    groupHeader.classList.add('group-header');
                    groupHeader.textContent = channel.group;
                    channelList.appendChild(groupHeader);
                }

                const li = document.createElement('li');
                li.classList.add('channel');
                li.textContent = channel.name;
                li.onclick = () => playChannel(channel.url);

                channelList.appendChild(li);
            });
        }

        function loadPlaylist() {
            const file = fileInput.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function (event) {
                    const content = event.target.result;
                    allChannels = parseM3U(content);
                    renderPlaylist(allChannels);
                };
                reader.readAsText(file);
            } else {
                alert('Please select a file to load.');
            }
        }

        function togglePlaylist() {
            if (isPlaylistVisible) {
                channelList.style.display = 'none';
            } else {
                channelList.style.display = 'block';
            }
            isPlaylistVisible = !isPlaylistVisible;
        }

        function playChannel(url) {
            const fileExtension = url.split('.').pop();

            if (fileExtension === 'm3u8') {
                if (Hls.isSupported()) {
                    const hls = new Hls();
                    hls.loadSource(url);
                    hls.attachMedia(videoPlayer);
                    hls.on(Hls.Events.MANIFEST_PARSED, function () {
                        videoPlayer.play();
                    });
                } else if (videoPlayer.canPlayType('application/vnd.apple.mpegurl')) {
                    videoPlayer.src = url;
                    videoPlayer.play();
                } else {
                    alert('HLS is not supported in this browser.');
                }
            } else if (fileExtension === 'ts') {
                videoPlayer.src = url;
                videoPlayer.load();
                videoPlayer.play();
            } else {
                videoPlayer.src = url;
                videoPlayer.load();
                videoPlayer.play();
            }
        }

        function filterChannels() {
            const searchTerm = document.getElementById('searchBar').value.toLowerCase();
            const filtered = allChannels.filter(channel => channel.name.toLowerCase().includes(searchTerm));
            renderPlaylist(filtered);
        }

                document.addEventListener("DOMContentLoaded", () => {
            const hamburger = document.getElementById("hamburger");
            const menuMobile = document.getElementById("menuMobile");

            // Toggle menu visibility on hamburger click
            hamburger.addEventListener("click", () => {
                menuMobile.classList.toggle("open");
            });

            // Close menu if clicked outside
            document.addEventListener("click", (e) => {
                if (!menuMobile.contains(e.target) && !hamburger.contains(e.target)) {
                    menuMobile.classList.remove("open");
                }
            });
        });
    </script>
</body>
</html>

